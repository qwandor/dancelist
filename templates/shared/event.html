<tr class="event{% if event.multiday() %} multiday{% endif %}{% if event.cancelled %} cancelled{% endif %}">
  <td class="event-dates">
    {{ event.short_time() }}
  </td>
  <td class="event-name" title="{{ event.details.as_deref().unwrap_or_default() }}">
    {% match event.main_link() %}
    {% when Some with (link) %}
    <a href="{{ link }}">{{ event.name }}</a>
    {% when None %}
    {{ event.name }}
    {% endmatch %}
  </td>
  <td class="event-links">
    {% for link in event.further_links() %}
    <a href="{{ link.url }}">({{ link.short_name }})</a>
    {% endfor %}
  </td>
  <td class="event-price">
    {{ event.price.as_deref().unwrap_or_default() }}
  </td>
  <td class="event-location">
    <a href="?country={{ event.country|urlencode }}&city={{ event.city|urlencode }}">{{ event.city }}</a>,
    {% match event.state %}
    {% when Some with (state) %}
    <a href="?country={{ event.country|urlencode }}&state={{ state|urlencode }}">{{ state }}</a>,
    {% when None %}
    {% endmatch %}
    <a href="?country={{ event.country|urlencode }}">{{ event.country }}</a>
  </td>
  <td class="event-type">
    {% if event.social %}
    <a href="?social=true" class="social" title="Social">S</a>
    {% endif %}
    {% if event.workshop %}
    <a href="?workshop=true" class="workshop" title="Workshop">W</a>
    {% endif %}
  </td>
  <td class="event-styles">
    {% for style in event.styles %}
    <a class="dance-style {{ style.tag() }}" href="?style={{ style.tag() }}">{{ style }}</a>
    {% endfor %}
  </td>
</tr>
{% if !event.bands.is_empty() || !event.callers.is_empty() %}
<tr class="details">
  <td colspan="7">
    {% for band in event.bands %}
    <a href="?band={{ band|urlencode }}" class="band">{{ band }}</a>
    {% endfor %}
    {% for caller in event.callers %}
    <a href="?caller={{ caller|urlencode }}" class="caller">{{ caller }}</a>
    {% endfor %}
  </td>
</tr>
{% endif %}
